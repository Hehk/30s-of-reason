{"dependencies":[{"name":"apollo-link","loc":{"line":9,"column":37}},{"name":"apollo-utilities","loc":{"line":10,"column":69}},{"name":"./core/QueryManager","loc":{"line":11,"column":29}},{"name":"./data/store","loc":{"line":12,"column":26}},{"name":"./version","loc":{"line":13,"column":24}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"apollo-link\"),t=require(\"apollo-utilities\"),r=require(\"./core/QueryManager\"),i=require(\"./data/store\"),o=require(\"./version\"),n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s=!1,a=new e.ApolloLink(function(e,r){return e.query=(0,t.removeConnectionDirectiveFromDocument)(e.query),r(e)}),u=function(){function u(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[];var n=e.link,u=e.cache,c=e.ssrMode,h=void 0!==c&&c,l=e.ssrForceFetchDelay,y=void 0===l?0:l,p=e.connectToDevTools,d=e.queryDeduplication,f=void 0===d||d,w=e.defaultOptions;if(!n||!u)throw new Error(\"\\n        In order to initialize Apollo Client, you must specify link & cache properties on the config object.\\n        This is part of the required upgrade when migrating from Apollo Client 1.0 to Apollo Client 2.0.\\n        For more information, please visit:\\n          https://www.apollographql.com/docs/react/basics/setup.html\\n        to help you get started.\\n      \");this.link=a.concat(n),this.cache=u,this.store=new i.DataStore(u),this.disableNetworkFetches=h||y>0,this.queryDeduplication=f,this.ssrMode=h,this.defaultOptions=w||{},y&&setTimeout(function(){return r.disableNetworkFetches=!1},y),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var b=!(0,t.isProduction)()&&\"undefined\"!=typeof window&&!window.__APOLLO_CLIENT__;(void 0===p?b:p&&\"undefined\"!=typeof window)&&(window.__APOLLO_CLIENT__=this),s||(0,t.isProduction)()||(s=!0,\"undefined\"!=typeof window&&window.document&&window.top===window.self&&void 0===window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__&&navigator.userAgent.indexOf(\"Chrome\")>-1&&console.debug(\"Download the Apollo DevTools for a better development experience: https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm\")),this.version=o.version}return u.prototype.watchQuery=function(e){return this.initQueryManager(),this.defaultOptions.watchQuery&&(e=n({},this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&\"network-only\"===e.fetchPolicy&&(e=n({},e,{fetchPolicy:\"cache-first\"})),this.queryManager.watchQuery(e)},u.prototype.query=function(e){if(this.initQueryManager(),this.defaultOptions.query&&(e=n({},this.defaultOptions.query,e)),\"cache-and-network\"===e.fetchPolicy)throw new Error(\"cache-and-network fetchPolicy can only be used with watchQuery\");return this.disableNetworkFetches&&\"network-only\"===e.fetchPolicy&&(e=n({},e,{fetchPolicy:\"cache-first\"})),this.queryManager.query(e)},u.prototype.mutate=function(e){return this.initQueryManager(),this.defaultOptions.mutate&&(e=n({},this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},u.prototype.subscribe=function(e){return this.initQueryManager(),this.queryManager.startGraphQLSubscription(e)},u.prototype.readQuery=function(e){return this.initProxy().readQuery(e)},u.prototype.readFragment=function(e){return this.initProxy().readFragment(e)},u.prototype.writeQuery=function(e){var t=this.initProxy().writeQuery(e);return this.queryManager.broadcastQueries(),t},u.prototype.writeFragment=function(e){var t=this.initProxy().writeFragment(e);return this.queryManager.broadcastQueries(),t},u.prototype.writeData=function(e){var t=this.initProxy().writeData(e);return this.queryManager.broadcastQueries(),t},u.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},u.prototype.__requestRaw=function(t){return(0,e.execute)(this.link,t)},u.prototype.initQueryManager=function(){var e=this;this.queryManager||(this.queryManager=new r.QueryManager({link:this.link,store:this.store,queryDeduplication:this.queryDeduplication,ssrMode:this.ssrMode,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.queryStore.getStore(),mutations:e.queryManager.mutationStore.getStore()},dataWithOptimisticResults:e.cache.extract(!0)})}}))},u.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){e.queryManager?e.queryManager.resetStore():Promise.resolve(null)}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(e){return e()}))})},u.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(t){return t!==e})}},u.prototype.reFetchObservableQueries=function(e){return this.queryManager?this.queryManager.reFetchObservableQueries(e):Promise.resolve(null)},u.prototype.extract=function(e){return this.initProxy().extract(e)},u.prototype.restore=function(e){return this.initProxy().restore(e)},u.prototype.initProxy=function(){return this.proxy||(this.initQueryManager(),this.proxy=this.cache),this.proxy},u}();exports.default=u;"},"hash":"427191d7bada912adba11c4754269dfc","cacheData":{"env":{}}}